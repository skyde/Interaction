" ┌────────────────────────────────────────────────────────────┐
" │        _vsvimrc — LazyVim-style for Visual Studio + C++    │
" └────────────────────────────────────────────────────────────┘


" Leader key setup
let mapleader = " "
let maplocalleader = ","

" ── User Interface ─────────────────────────────────────────────
set number
set relativenumber
set cursorline
set scrolloff=5

" Search
set ignorecase
set smartcase
set incsearch
set hlsearch

" ── Reload vimrc ───────────────────────────────────────────────
map zl :so ~/.vsvimrc<CR>

" ── Easy scrolling - large & fine detail ──────
nnoremap st <C-d>
nnoremap ts <C-u>
nnoremap tt <C-f>
nnoremap ss <C-b>
nnoremap <C-u> 16k
nnoremap <C-d> 16j

" ── Visual-mode reselect indenting ─────────────────────────────
vnoremap < <gv
vnoremap > >gv

" ── Window/tab navigation ──────────────────────────────────────
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l
nnoremap <S-l> :vsc Window.NextTab<CR>
nnoremap <S-h> :vsc Window.PreviousTab<CR>
nnoremap <leader><leader> :vsc ReSharper.ReSharper_GotoFile<CR>

" " ── File ops ───────────────────────────────────────────────────
" nnoremap <leader>s :vsc File.SaveAll<CR>
" nnoremap <leader>x :vsc File.Close<CR>
" nnoremap <leader>ff :vsc File.OpenFile<CR>
" nnoremap <leader>fs :vsc File.SaveAll<CR>
" nnoremap <leader>q  :vsc File.Close<CR>

" ── Solution Explorer and Terminal ─────────────────────────────
nnoremap <leader>e :vsc View.SolutionExplorer<CR>
nnoremap <leader>t :vsc View.Terminal<CR>

" ── Code navigation ────────────────────────────────────────────
nnoremap gd :vsc Edit.GoToDefinition<CR>
nnoremap gi :vsc Edit.GoToImplementation<CR>
nnoremap gr :vsc Edit.FindAllReferences<CR>
nnoremap gk :vsc Edit.PreviousMethod<CR>
nnoremap gj :vsc Edit.NextMethod<CR>

" ── Code actions & refactoring ─────────────────────────────────
nnoremap <leader>. :vsc View.QuickActionsForPosition<CR>
nnoremap <leader>cr :vsc ReSharper.ReSharper_Rename<CR>

" ── Commenting ─────────────────────────────────────────────────
nnoremap gc :vsc Edit.ToggleComment<CR>

" ── Error & diagnostics navigation ─────────────────────────────
nnoremap <leader>ee :vsc View.ErrorList<CR>
nnoremap <leader>en :vsc View.NextError<CR>
nnoremap <leader>ep :vsc View.PreviousError<CR>

" ── Split/Tab Group management ────────────────────────────────
nnoremap ]b :vsc Window.NextTab<CR>
nnoremap [b :vsc Window.PreviousTab<CR>
nnoremap <leader>bd :vsc Window.CloseDocumentWindow<CR>
nnoremap <leader>bp :vsc Window.PinTab<CR>
nnoremap <leader>bP :vsc Window.CloseAllButPinned<CR>

" nnoremap <leader>ws :vsc Window.NewVerticalTabGroup<CR>
" nnoremap <leader>wv :vsc Window.Split<CR>
" nnoremap <leader>wr :vsc Window.RemoveSplit<CR>

" ── Clipboard and backspace support ───────────────────────────
set clipboard=unnamed
set backspace=indent,eol,start

" ── Done ───────────────────────────────────────────────────────
" Save as _vsvimrc in your user folder. Restart VS to load.

" ── Peasy Motion ───────────────────────────────────────────────
" gS prefix is added for ViEmu, no use for VsVim AFAIK.
"VsVim and ViEmu are disabled until PeasyMotion finishes

"Whole viewport jump-to-word beginning mode:
" nnoremap ;x gS:vsc Tools.InvokePeasyMotion<CR>

"Select text from current caret position to desired jump label (fwd and reverse directions supported)
nmap ;; gS:vsc Tools.InvokePeasyMotionTextSelect<CR>

"Jump to word beginning in current line
nmap zw gS:vsc Tools.InvokePeasyMotionLineJumpToWordBegining<CR>
"Jump to word ending in current line
" nmap ze gS:vsc Tools.InvokePeasyMotionLineJumpToWordEnding<CR>

"Jump to any open document tab
nmap S gS:vsc Tools.InvokePeasyMotionJumpToDocumentTab<CR>

"Jump to line beginning:
" nmap ;l gS:vsc Tools.InvokePeasyMotionJumpToLineBegining<CR>

"Two char search mode:
nmap s gS:vsc Tools.InvokePeasyMotionTwoCharJump<CR>

"One char search mode:
" nmap ;v gS:vsc Tools.InvokePeasyMotionOneCharJump<CR>

